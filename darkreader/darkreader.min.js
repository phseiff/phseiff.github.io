!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e=e||self).DarkReader={})}(this,function(e){"use strict";var t=function(){return(t=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function r(e,t,r,n){return new(r||(r=Promise))(function(o,a){function i(e){try{c(n.next(e))}catch(e){a(e)}}function u(e){try{c(n.throw(e))}catch(e){a(e)}}function c(e){e.done?o(e.value):new r(function(t){t(e.value)}).then(i,u)}c((n=n.apply(e,t||[])).next())})}function n(e,t){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function o(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function a(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function i(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(a(arguments[t]));return e}function u(){return navigator.userAgent.includes("Firefox")}function c(){return"undefined"==typeof navigator?null:navigator.platform.toLowerCase().startsWith("mac")}function s(e,t){return r(this,void 0,void 0,function(){var r;return n(this,function(n){switch(n.label){case 0:return[4,fetch(e,{cache:"force-cache",credentials:"omit"})];case 1:if(r=n.sent(),u()&&"text/css"===t&&e.startsWith("moz-extension://")&&e.endsWith(".css"))return[2,r];if(t&&!r.headers.get("Content-Type").startsWith(t))throw new Error("Mime type mismatch when loading "+e);if(!r.ok)throw new Error("Unable to load "+e+" "+r.status+" "+r.statusText);return[2,r]}})})}function l(e,t){return r(this,void 0,void 0,function(){return n(this,function(r){switch(r.label){case 0:return[4,s(e,t)];case 1:return[4,d(r.sent())];case 2:return[2,r.sent()]}})})}function d(e){return r(this,void 0,void 0,function(){var t;return n(this,function(r){switch(r.label){case 0:return[4,e.blob()];case 1:return t=r.sent(),[4,new Promise(function(e){var r=new FileReader;r.onloadend=function(){return e(r.result)},r.readAsDataURL(t)})];case 2:return[2,r.sent()]}})})}var f=function(e){return r(void 0,void 0,void 0,function(){return n(this,function(t){return[2,Promise.reject(new Error(["Embedded Dark Reader cannot access a cross-origin resource",e,"Overview your URLs and CORS policies or use","`DarkReader.setFetchMethod(fetch: (url) => Promise<Response>))`.","See if using `DarkReader.setFetchMethod(window.fetch)`","before `DarkReader.enable()` works."].join(" ")))]})})},h=f;function p(e){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return[4,h(e)];case 1:return[2,t.sent()]}})})}window.chrome||(window.chrome={}),chrome.runtime||(chrome.runtime={});var m=new Set;function v(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(this,void 0,void 0,function(){var t,r,o,a,i,u,c;return n(this,function(n){switch(n.label){case 0:if(!e[0]||"fetch"!==e[0].type)return[3,8];t=e[0].id,n.label=1;case 1:return n.trys.push([1,7,,8]),r=e[0].data,o=r.url,a=r.responseType,[4,p(o)];case 2:return i=n.sent(),"data-url"!==a?[3,4]:[4,d(i)];case 3:return u=n.sent(),[3,6];case 4:return[4,i.text()];case 5:u=n.sent(),n.label=6;case 6:return m.forEach(function(e){return e({type:"fetch-response",data:u,error:null,id:t})}),[3,8];case 7:return c=n.sent(),console.error(c),m.forEach(function(e){return e({type:"fetch-response",data:null,error:c,id:t})}),[3,8];case 8:return[2]}})})}function g(e){m.add(e)}if("function"==typeof chrome.runtime.sendMessage){var b=chrome.runtime.sendMessage;chrome.runtime.sendMessage=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];v.apply(void 0,i(e)),b.apply(chrome.runtime,e)}}else chrome.runtime.sendMessage=v;if(chrome.runtime.onMessage||(chrome.runtime.onMessage={}),"function"==typeof chrome.runtime.onMessage.addListener){var y=chrome.runtime.onMessage.addListener;chrome.runtime.onMessage.addListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];g.apply(void 0,i(e)),y.apply(chrome.runtime.onMessage,e)}}else chrome.runtime.onMessage.addListener=g;var w={cssFilter:"cssFilter",svgFilter:"svgFilter",staticTheme:"staticTheme",dynamicTheme:"dynamicTheme"},k={mode:1,brightness:100,contrast:100,grayscale:0,sepia:0,useFont:!1,fontFamily:c()?"Helvetica Neue":"undefined"!=typeof navigator&&navigator.platform.toLowerCase().startsWith("win")?"Segoe UI":"Open Sans",textStroke:0,engine:w.dynamicTheme,stylesheet:"",scrollbarColor:c()?"":"auto",selectionColor:"auto"};function S(e,t){var r,n;if(function(e){return null!=e.length}(e))for(var a=0,i=e.length;a<i;a++)t(e[a]);else try{for(var u=o(e),c=u.next();!c.done;c=u.next()){t(c.value)}}catch(e){r={error:e}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}}function E(e,t){S(t,function(t){return e.push(t)})}function x(e){var t=document.createElement("a");return t.href=e,t}function M(e,t){var r,n=x(e).pathname.split("/");for(n=n.concat.apply(n,i(t.split("/"))).filter(function(e){return e});(r=n.indexOf(".."))>0;)n.splice(r-1,2);return n}function A(e,t){if(t.match(/^.*?\/\//)||t.match(/^data\:/))return t.startsWith("//")?t.includes("..")?""+location.protocol+M(e,t).join("/"):""+location.protocol+t:t;var r=x(e);if(t.startsWith("/"))return x(r.protocol+"//"+r.host+t).href;var n=r.pathname.split("/");return n[n.length-1].match(/\.[a-z]+$/i)&&n.pop(),n=M(e,t),x(r.protocol+"//"+r.host+"/"+n.join("/")).href}function R(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function L(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]}function C(e,t){S(e,function(e){if(e instanceof CSSMediaRule){var r=Array.from(e.media);(r.includes("screen")||r.includes("all")||!r.includes("print")&&!r.includes("speech"))&&C(e.cssRules,t)}else if(e instanceof CSSStyleRule)t(e);else if(e instanceof CSSImportRule)try{C(e.styleSheet.cssRules,t)}catch(e){L(e)}else L("CSSRule type not supported",e)})}function P(e,t){S(e,function(r){var n=e.getPropertyValue(r).trim();n&&t(r,n)})}function T(e){return e.startsWith("--")&&!e.startsWith("--darkreader")}function j(e){var t=new Map;return P(e.style,function(e,r){T(e)&&t.set(e,r)}),t}var F=/url\((('.+?')|(".+?")|([^\)]*?))\)/g,O=/@import (url\()?(('.+?')|(".+?")|([^\)]*?))\)?;?/g;function W(e){return e.replace(/^url\((.*)\)$/,"$1").replace(/^"(.*)"$/,"$1").replace(/^'(.*)'$/,"$1")}function q(e){var t=x(e);return t.protocol+"//"+t.host+t.pathname.replace(/\?.*$/,"").replace(/(\/)([^\/]+)$/i,"$1")}var N=/\/\*[\s\S]*?\*\//g;var I=/@font-face\s*{[^}]*}/g;var z=/var\((--[^\s,\(\)]+),?\s*([^\(\)]*(\([^\(\)]*\)[^\(\)]*)*\s*)\)/g;function B(e,t){var r=!1,n=e.replace(z,function(e,n,o){return t.has(n)?t.get(n):o||(L("Variable "+n+" not found"),r=!0,e)});return r?n:n.match(z)?B(n,t):n}function $(e){var t,r=!1,n=null;return Object.assign(function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];t=o,n?r=!0:(e.apply(void 0,i(t)),n=requestAnimationFrame(function(){n=null,r&&(e.apply(void 0,i(t)),r=!1)}))},{cancel:function(){cancelAnimationFrame(n),r=!1,n=null}})}function U(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function D(e,t,r){void 0===r&&(r=Function.prototype);var n,o,a=(o=0,(n={seconds:10}).seconds&&(o+=1e3*n.seconds),n.minutes&&(o+=60*n.minutes*1e3),n.hours&&(o+=60*n.hours*60*1e3),n.days&&(o+=24*n.days*60*60*1e3),o),i=e.previousSibling,u=e.parentNode;if(!u)throw new Error("Unable to watch for node position: parent element not found");if("prev-sibling"===t&&!i)throw new Error("Unable to watch for node position: there is no previous sibling");var c=0,s=null,l=$(function(){c++;var n=Date.now();if(null==s)s=n;else if(c>=10){if(n-s<a)return L("Node position watcher stopped: some script conflicts with Dark Reader and can cause high CPU usage",e,i),void h();s=n,c=1}if("parent"===t&&i&&i.parentNode!==u)return L("Unable to restore node position: sibling parent changed",e,i,u),void h();if("prev-sibling"===t){if(null==i.parentNode)return L("Unable to restore node position: sibling was removed",e,i,u),void h();i.parentNode!==u&&(L("Style was moved to another parent",e,i,u),p(i.parentNode))}L("Restoring node position",e,i,u),u.insertBefore(e,i?i.nextSibling:u.firstChild),d.takeRecords(),r&&r()}),d=new MutationObserver(function(){("parent"===t&&e.parentNode!==u||"prev-sibling"===t&&e.previousSibling!==i)&&l()}),f=function(){d.observe(u,{childList:!0})},h=function(){d.disconnect(),l.cancel()},p=function(e){u=e,h(),f()};return f(),{run:f,stop:h}}function H(e,t){for(var r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:function(e){return null==e.shadowRoot?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT}},!1),n=e.shadowRoot?r.currentNode:r.nextNode();null!=n;n=r.nextNode())t(n),H(n.shadowRoot,t)}function V(){return"complete"===document.readyState||"interactive"===document.readyState}var G=new Set;function _(e){G.add(e)}function K(e){G.delete(e)}if(!V()){var J=function(){V()&&(document.removeEventListener("readystatechange",J),G.forEach(function(e){return e()}),G.clear())};document.addEventListener("readystatechange",J)}var Q=1e3;var X=new Map,Y=new WeakMap;function Z(e,t){var r,n,o;if(X.has(e))r=X.get(e),n=Y.get(r);else{var a=!1,i=!1;(r=new MutationObserver(function(t){if(function(e){if(e.length>Q)return!0;for(var t=0,r=0;r<e.length;r++)if((t+=e[r].addedNodes.length)>Q)return!0;return!1}(t))!a||V()?n.forEach(function(t){return(0,t.onHugeMutations)(e)}):i||(_(o=function(){return n.forEach(function(t){return(0,t.onHugeMutations)(e)})}),i=!0),a=!0;else{var r=function(e){var t=new Set,r=new Set,n=new Set;e.forEach(function(e){S(e.addedNodes,function(e){e instanceof Element&&e.isConnected&&t.add(e)}),S(e.removedNodes,function(e){e instanceof Element&&(e.isConnected?n.add(e):r.add(e))})}),n.forEach(function(e){return t.delete(e)});var o=[],a=[];return t.forEach(function(e){t.has(e.parentElement)&&o.push(e)}),r.forEach(function(e){r.has(e.parentElement)&&a.push(e)}),o.forEach(function(e){return t.delete(e)}),a.forEach(function(e){return r.delete(e)}),{additions:t,moves:n,deletions:r}}(t);n.forEach(function(e){return(0,e.onMinorMutations)(r)})}})).observe(e,{childList:!0,subtree:!0}),X.set(e,r),n=new Set,Y.set(r,n)}return n.add(t),{disconnect:function(){n.delete(t),o&&K(o),0===n.size&&(r.disconnect(),Y.delete(r),X.delete(e))}}}function ee(e){var t=e.h,r=e.s,n=e.l,o=e.a,i=void 0===o?1:o;if(0===r){var u=a([n,n,n].map(function(e){return Math.round(255*e)}),3),c=u[0],s=u[1];return{r:c,g:u[2],b:s,a:i}}var l=(1-Math.abs(2*n-1))*r,d=l*(1-Math.abs(t/60%2-1)),f=n-l/2,h=a((t<60?[l,d,0]:t<120?[d,l,0]:t<180?[0,l,d]:t<240?[0,d,l]:t<300?[d,0,l]:[l,0,d]).map(function(e){return Math.round(255*(e+f))}),3);return{r:h[0],g:h[1],b:h[2],a:i}}function te(e){var t=e.r,r=e.g,n=e.b,o=e.a,a=void 0===o?1:o,i=t/255,u=r/255,c=n/255,s=Math.max(i,u,c),l=Math.min(i,u,c),d=s-l,f=(s+l)/2;if(0===d)return{h:0,s:0,l:f,a:a};var h=60*(s===i?(u-c)/d%6:s===u?(c-i)/d+2:(i-u)/d+4);return h<0&&(h+=360),{h:h,s:d/(1-Math.abs(2*f-1)),l:f,a:a}}function re(e,t){void 0===t&&(t=0);var r=e.toFixed(t);if(0===t)return r;var n=r.indexOf(".");if(n>=0){var o=r.match(/0+$/);if(o)return o.index===n+1?r.substring(0,n):r.substring(0,o.index)}return r}function ne(e){var t=e.h,r=e.s,n=e.l,o=e.a;return null!=o&&o<1?"hsla("+re(t)+", "+re(100*r)+"%, "+re(100*n)+"%, "+re(o,2)+")":"hsl("+re(t)+", "+re(100*r)+"%, "+re(100*n)+"%)"}var oe=/^rgba?\([^\(\)]+\)$/,ae=/^hsla?\([^\(\)]+\)$/,ie=/^#[0-9a-f]+$/i;function ue(e){var t,r,n,o,i,u=e.trim().toLowerCase();if(u.match(oe))return t=a(ce(u,se,le,de),4),r=t[0],n=t[1],o=t[2],i=t[3],{r:r,g:n,b:o,a:void 0===i?1:i};if(u.match(ae))return function(e){var t=a(ce(e,fe,he,pe),4),r=t[0],n=t[1],o=t[2],i=t[3];return ee({h:r,s:n,l:o,a:void 0===i?1:i})}(u);if(u.match(ie))return function(e){var t=e.substring(1);switch(t.length){case 3:case 4:var r=a([0,1,2].map(function(e){return parseInt(""+t[e]+t[e],16)}),3),n=r[0],o=r[1],i=r[2],u=3===t.length?1:parseInt(""+t[3]+t[3],16)/255;return{r:n,g:o,b:i,a:u};case 6:case 8:var c=a([0,2,4].map(function(e){return parseInt(t.substring(e,e+2),16)}),3),n=c[0],o=c[1],i=c[2],u=6===t.length?1:parseInt(t.substring(6,8),16)/255;return{r:n,g:o,b:i,a:u}}throw new Error("Unable to parse "+e)}(u);if(me.has(u))return function(e){var t=me.get(e);return{r:t>>16&255,g:t>>8&255,b:t>>0&255,a:1}}(u);if(ve.has(u))return function(e){var t=ve.get(e);return{r:t>>16&255,g:t>>8&255,b:t>>0&255,a:1}}(u);if("transparent"===e)return{r:0,g:0,b:0,a:0};throw new Error("Unable to parse "+e)}function ce(e,t,r,n){var o=e.split(t).filter(function(e){return e}),i=Object.entries(n);return o.map(function(e){return e.trim()}).map(function(e,t){var n,o=i.find(function(t){var r=a(t,1)[0];return e.endsWith(r)});return n=o?parseFloat(e.substring(0,e.length-o[0].length))/o[1]*r[t]:parseFloat(e),r[t]>1?Math.round(n):n})}var se=/rgba?|\(|\)|\/|,|\s/gi,le=[255,255,255,1],de={"%":100};var fe=/hsla?|\(|\)|\/|,|\s/gi,he=[360,1,1,1],pe={"%":100,deg:360,rad:2*Math.PI,turn:1};var me=new Map(Object.entries({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgrey:11119017,darkgreen:25600,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,grey:8421504,green:32768,greenyellow:11403055,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgrey:13882323,lightgreen:9498256,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074})),ve=new Map(Object.entries({ActiveBorder:3906044,ActiveCaption:0,AppWorkspace:11184810,Background:6513614,ButtonFace:16777215,ButtonHighlight:15329769,ButtonShadow:10461343,ButtonText:0,CaptionText:0,GrayText:8355711,Highlight:11720703,HighlightText:0,InactiveBorder:16777215,InactiveCaption:16777215,InactiveCaptionText:0,InfoBackground:16514245,InfoText:0,Menu:16185078,MenuText:16777215,Scrollbar:11184810,ThreeDDarkShadow:0,ThreeDFace:12632256,ThreeDHighlight:16777215,ThreeDLightShadow:16777215,ThreeDShadow:0,Window:15527148,WindowFrame:11184810,WindowText:0,"-webkit-focus-ring-color":15046400}).map(function(e){var t=a(e,2),r=t[0],n=t[1];return[r.toLowerCase(),n]}));function ge(e,t,r,n,o){return(e-t)*(o-n)/(r-t)+n}function be(e,t,r){return Math.min(r,Math.max(t,e))}function ye(e,t){for(var r=[],n=0;n<e.length;n++){r[n]=[];for(var o=0;o<t[0].length;o++){for(var a=0,i=0;i<e[0].length;i++)a+=e[n][i]*t[i][o];r[n][o]=a}}return r}function we(e,t,r){void 0===r&&(r=0);for(var n,o=[];n=e.exec(t);)o.push(n[r]);return o}function ke(e){var t=Ee.identity();return 0!==e.sepia&&(t=ye(t,Ee.sepia(e.sepia/100))),0!==e.grayscale&&(t=ye(t,Ee.grayscale(e.grayscale/100))),100!==e.contrast&&(t=ye(t,Ee.contrast(e.contrast/100))),100!==e.brightness&&(t=ye(t,Ee.brightness(e.brightness/100))),1===e.mode&&(t=ye(t,Ee.invertNHue())),t}var Se,Ee={identity:function(){return[[1,0,0,0,0],[0,1,0,0,0],[0,0,1,0,0],[0,0,0,1,0],[0,0,0,0,1]]},invertNHue:function(){return[[.333,-.667,-.667,0,1],[-.667,.333,-.667,0,1],[-.667,-.667,.333,0,1],[0,0,0,1,0],[0,0,0,0,1]]},brightness:function(e){return[[e,0,0,0,0],[0,e,0,0,0],[0,0,e,0,0],[0,0,0,1,0],[0,0,0,0,1]]},contrast:function(e){var t=(1-e)/2;return[[e,0,0,0,t],[0,e,0,0,t],[0,0,e,0,t],[0,0,0,1,0],[0,0,0,0,1]]},sepia:function(e){return[[.393+.607*(1-e),.769-.769*(1-e),.189-.189*(1-e),0,0],[.349-.349*(1-e),.686+.314*(1-e),.168-.168*(1-e),0,0],[.272-.272*(1-e),.534-.534*(1-e),.131+.869*(1-e),0,0],[0,0,0,1,0],[0,0,0,0,1]]},grayscale:function(e){return[[.2126+.7874*(1-e),.7152-.7152*(1-e),.0722-.0722*(1-e),0,0],[.2126-.2126*(1-e),.7152+.2848*(1-e),.0722-.0722*(1-e),0,0],[.2126-.2126*(1-e),.7152-.7152*(1-e),.0722+.9278*(1-e),0,0],[0,0,0,1,0],[0,0,0,0,1]]}},xe=new Map;function Me(e,t,r){var n;xe.has(r)?n=xe.get(r):(n=new Map,xe.set(r,n));var o=Object.entries(e).concat(Object.entries(t).filter(function(e){var t=a(e,1)[0];return["mode","brightness","contrast","grayscale","sepia"].indexOf(t)>=0})).map(function(e){var t=a(e,2);return t[0]+":"+t[1]}).join(";");if(n.has(o))return n.get(o);var i=ee(r(te(e))),u=i.r,c=i.g,s=i.b,l=i.a,d=a(function(e,t){var r=a(e,3),n=ye(t,[[r[0]/255],[r[1]/255],[r[2]/255],[1],[1]]);return[0,1,2].map(function(e){return be(Math.round(255*n[e][0]),0,255)})}([u,c,s],ke(t)),3),f=d[0],h=d[1],p=d[2],m=1===l?function(e){var t=e.r,r=e.g,n=e.b,o=e.a;return"#"+(null!=o&&o<1?[t,r,n,Math.round(255*o)]:[t,r,n]).map(function(e){return(e<16?"0":"")+e.toString(16)}).join("")}({r:f,g:h,b:p}):function(e){var t=e.r,r=e.g,n=e.b,o=e.a;return null!=o&&o<1?"rgba("+re(t)+", "+re(r)+", "+re(n)+", "+re(o,2)+")":"rgb("+re(t)+", "+re(r)+", "+re(n)+")"}({r:f,g:h,b:p,a:l});return n.set(o,m),m}function Ae(e){return e}function Re(e){var t=e.h,r=e.s,n=e.l,o=e.a,a=ge(n,0,1,0,.9),i=t,u=r;return(n<.2||n>.8||r<.36)&&(u=n<.4?ge(n,0,.4,.16,0):ge(n,.4,1,0,.16),i=n<.4?205:40),{h:i,s:u,l:a,a:o}}function Le(e){var t=e.h,r=e.s,n=e.l,o=e.a,a=ge(r,0,1,.25,.4),i=t,u=r;return(n>=.8&&t>200&&t<280||r<.12)&&(u=.05,i=205),{h:i,s:u,l:n<a?n:n<.5?a:ge(n,.5,1,a,.1),a:o}}function Ce(e,r){return 0===r.mode?Me(e,r,Re):Me(e,t(t({},r),{mode:0}),Le)}function Pe(e){var t=e.h,r=e.s,n=e.l,o=e.a,a=t>205&&t<=245,i=ge(r,0,1,a?ge(t,205,245,.7,.7):.7,.6),u=n<.5?ge(n,0,.5,.9,i):n<i?i:n,c=t,s=r;return a&&(c=ge(c,205,245,205,220)),(n<.2||r<.24)&&(s=.1,c=40),{h:c,s:s,l:u,a:o}}function Te(e,r){return 0===r.mode?Me(e,r,Re):Me(e,t(t({},r),{mode:0}),Pe)}function je(e){var t=e.h,r=e.s,n=e.l,o=e.a,a=ge(r,0,1,.2,.3),i=ge(r,0,1,.4,.5);return{h:t,s:r,l:ge(n,0,1,i,a),a:o}}function Fe(e,r){return 0===r.mode?Me(e,r,Re):Me(e,t(t({},r),{mode:0}),je)}function Oe(e,t){return Ce(e,t)}function We(e){var t=[];return e.mode===Se.dark&&t.push("invert(100%) hue-rotate(180deg)"),100!==e.brightness&&t.push("brightness("+e.brightness+"%)"),100!==e.contrast&&t.push("contrast("+e.contrast+"%)"),0!==e.grayscale&&t.push("grayscale("+e.grayscale+"%)"),0!==e.sepia&&t.push("sepia("+e.sepia+"%)"),0===t.length?null:t.join(" ")}!function(e){e[e.light=0]="light",e[e.dark=1]="dark"}(Se||(Se={}));var qe=0,Ne=new Map,Ie=new Map;function ze(e){return new Promise(function(t,r){var n=++qe;Ne.set(n,t),Ie.set(n,r),chrome.runtime.sendMessage({type:"fetch",data:e,id:n})})}function Be(e){return r(this,void 0,void 0,function(){var r,o,a;return n(this,function(n){switch(n.label){case 0:return e.startsWith("data:")?(r=e,[3,3]):[3,1];case 1:return[4,$e(e)];case 2:r=n.sent(),n.label=3;case 3:return[4,Ue(r)];case 4:return o=n.sent(),a=function(e){De||(t=Ve,r=Ve,(De=document.createElement("canvas")).width=t,De.height=r,(He=De.getContext("2d")).imageSmoothingEnabled=!1);var t,r;var n=e.naturalWidth,o=e.naturalHeight,a=n*o,i=Math.min(1,Math.sqrt(Ve/a)),u=Math.ceil(n*i),c=Math.ceil(o*i);He.clearRect(0,0,u,c),He.drawImage(e,0,0,n,o,0,0,u,c);var s,l,d,f,h,p,m,v=He.getImageData(0,0,u,c).data,g=0,b=0,y=0;for(d=0;d<c;d++)for(l=0;l<u;l++)f=v[(s=4*(d*u+l))+0]/255,h=v[s+1]/255,p=v[s+2]/255,v[s+3]/255<.05?g++:((m=.2126*f+.7152*h+.0722*p)<.4&&b++,m>.7&&y++);var w=u*c,k=w-g;return{isDark:b/k>=.7,isLight:y/k>=.7,isTransparent:g/w>=.1,isLarge:a>=48e4}}(o),[2,t({src:e,dataURL:r,width:o.naturalWidth,height:o.naturalHeight},a)]}})})}function $e(e){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return function(e){return e.match(/^(.*?\/{2,3})?(.+?)(\/|$)/)[2]}(e)!==location.host?[3,2]:[4,l(e)];case 1:return[2,t.sent()];case 2:return[4,ze({url:e,responseType:"data-url"})];case 3:return[2,t.sent()]}})})}function Ue(e){return r(this,void 0,void 0,function(){return n(this,function(t){return[2,new Promise(function(t,r){var n=new Image;n.onload=function(){return t(n)},n.onerror=function(){return r("Unable to load image "+e)},n.src=e})]})})}chrome.runtime.onMessage.addListener(function(e){var t=e.type,r=e.data,n=e.error,o=e.id;if("fetch-response"===t){var a=Ne.get(o),i=Ie.get(o);Ne.delete(o),Ie.delete(o),n?i&&i(n):a&&a(r)}});var De,He,Ve=1024;var Ge=new Set;function _e(e,t){for(var r=e.dataURL,n=e.width,o=e.height,a=['<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+n+'" height="'+o+'">',"<defs>",'<filter id="darkreader-image-filter">','<feColorMatrix type="matrix" values="'+ke(t).slice(0,4).map(function(e){return e.map(function(e){return e.toFixed(3)}).join(" ")}).join(" ")+'" />',"</filter>","</defs>",'<image width="'+n+'" height="'+o+'" filter="url(#darkreader-image-filter)" xlink:href="'+r+'" />',"</svg>"].join(""),i=new Uint8Array(a.length),u=0;u<a.length;u++)i[u]=a.charCodeAt(u);var c=new Blob([i],{type:"image/svg+xml"}),s=URL.createObjectURL(c);return Ge.add(s),s}function Ke(){De=null,He=null,Ge.forEach(function(e){return URL.revokeObjectURL(e)}),Ge.clear()}function Je(e,o,a,i){var u=Boolean(a&&a.style&&a.style.getPropertyPriority(e)),c=o;if(e.startsWith("--"))return null;if(e.indexOf("color")>=0&&"-webkit-print-color-adjust"!==e||"fill"===e||"stroke"===e){if(s=function(e,t){if(Ye.has(t.toLowerCase()))return t;try{var r=et(t);return e.indexOf("background")>=0?function(e){return Ce(r,e)}:e.indexOf("border")>=0||e.indexOf("outline")>=0?function(e){return Fe(r,e)}:function(e){return Te(r,e)}}catch(e){return L("Color parse error",e),null}}(e,o))return{property:e,value:s,important:u,sourceValue:c}}else if("background-image"===e||"list-style-image"===e){if(s=function(e,o,a,i){var u=this;try{var c=we(rt,o),s=we(F,o);if(0===s.length&&0===c.length)return o;var l=function(e){var t=0;return e.map(function(e){var r=o.indexOf(e,t);return t=r+e.length,{match:e,index:r}})},d=l(s).map(function(e){return t({type:"url"},e)}).concat(l(c).map(function(e){return t({type:"gradient"},e)})).sort(function(e,t){return e.index-t.index}),f=function(e,r){var n,o=e.isDark,a=e.isLight,i=e.isTransparent,u=e.isLarge,c=e.width;if(o&&i&&1===r.mode&&!u&&c>2){R("Inverting dark image "+e.src);var s=_e(e,t(t({},r),{sepia:be(r.sepia+10,0,100)}));n='url("'+s+'")'}else if(a&&!i&&1===r.mode)if(u)n="none";else{R("Dimming light image "+e.src);var l=_e(e,r);n='url("'+l+'")'}else if(0===r.mode&&a&&!u){R("Applying filter to image "+e.src);var d=_e(e,t(t({},r),{brightness:be(r.brightness-10,5,200),sepia:be(r.sepia+10,0,100)}));n='url("'+d+'")'}else n=null;return n},h=[],p=0;return d.forEach(function(e,t){var c=e.match,s=e.type,l=e.index,m=p,v=l+c.length;p=v,h.push(function(){return o.substring(m,l)}),h.push("url"===s?function(e){var t=W(e);if(a.parentStyleSheet.href){var o=q(a.parentStyleSheet.href);t=A(o,t)}else t=a.parentStyleSheet.ownerNode&&a.parentStyleSheet.ownerNode.baseURI?A(a.parentStyleSheet.ownerNode.baseURI,t):A(location.origin,t);var c='url("'+t+'")';return function(e){return r(u,void 0,void 0,function(){var r,o;return n(this,function(n){switch(n.label){case 0:return nt.has(t)?(r=nt.get(t),[3,7]):[3,1];case 1:return n.trys.push([1,6,,7]),ot.has(t)?(o=ot.get(t),[4,new Promise(function(e){return o.push(e)})]):[3,3];case 2:return(r=n.sent())?[3,5]:[2,null];case 3:return ot.set(t,[]),[4,Be(t)];case 4:r=n.sent(),nt.set(t,r),ot.get(t).forEach(function(e){return e(r)}),ot.delete(t),n.label=5;case 5:return i()?[2,null]:[3,7];case 6:return L(n.sent()),ot.has(t)&&(ot.get(t).forEach(function(e){return e(null)}),ot.delete(t)),[2,c];case 7:return[2,f(r,e)||c]}})})}}(c):function(e){var t=e.match(/^(.*-gradient)\((.*)\)$/),r=t[1],n=t[2],o=/^(from|color-stop|to)\(([^\(\)]*?,\s*)?(.*?)\)$/,a=we(/([^\(\),]+(\([^\(\)]*(\([^\(\)]*\)*[^\(\)]*)?\))?[^\(\),]*),?/g,n,1).map(function(e){var t=tt(e=e.trim());if(t)return function(e){return Oe(t,e)};var r=e.lastIndexOf(" ");if(t=tt(e.substring(0,r)))return function(n){return Oe(t,n)+" "+e.substring(r+1)};var n=e.match(o);return n&&(t=tt(n[3]))?function(e){return n[1]+"("+(n[2]?n[2]+", ":"")+Oe(t,e)+")"}:function(){return e}});return function(e){return r+"("+a.map(function(t){return t(e)}).join(", ")+")"}}(c)),t===d.length-1&&h.push(function(){return o.substring(v)})}),function(e){var t=h.map(function(t){return t(e)});return t.some(function(e){return e instanceof Promise})?Promise.all(t).then(function(e){return e.join("")}):t.join("")}}catch(e){return L("Unable to parse gradient "+o,e),null}}(0,o,a,i))return{property:e,value:s,important:u,sourceValue:c}}else if(e.indexOf("shadow")>=0){var s;if(s=function(e,t){try{var r=0,n=we(/(^|\s)([a-z]+\(.+?\)|#[0-9a-f]+|[a-z]+)(.*?(inset|outset)?($|,))/gi,t,2),o=n.map(function(e,o){var a=r,i=t.indexOf(e,r),u=i+e.length;r=u;var c=tt(e);return c?function(e){return""+t.substring(a,i)+function(e,t){return Ce(e,t)}(c,e)+(o===n.length-1?t.substring(u):"")}:function(){return t.substring(a,u)}});return function(e){return o.map(function(t){return t(e)}).join("")}}catch(e){return L("Unable to parse shadow "+t,e),null}}(0,o))return{property:e,value:s,important:u,sourceValue:c}}return null}function Qe(e,r){var n=[];return r||(n.push("html {"),n.push("    background-color: "+Ce({r:255,g:255,b:255},e)+" !important;"),n.push("}")),n.push((r?"":"html, body, ")+"input, textarea, select, button {"),n.push("    background-color: "+Ce({r:255,g:255,b:255},e)+";"),n.push("}"),n.push("html, body, input, textarea, select, button {"),n.push("    border-color: "+Fe({r:76,g:76,b:76},e)+";"),n.push("    color: "+Te({r:0,g:0,b:0},e)+";"),n.push("}"),n.push("a {"),n.push("    color: "+Te({r:0,g:64,b:255},e)+";"),n.push("}"),n.push("table {"),n.push("    border-color: "+Fe({r:128,g:128,b:128},e)+";"),n.push("}"),n.push("::placeholder {"),n.push("    color: "+Te({r:169,g:169,b:169},e)+";"),n.push("}"),n.push("input:-webkit-autofill,"),n.push("textarea:-webkit-autofill,"),n.push("select:-webkit-autofill {"),n.push("    background-color: "+Ce({r:250,g:255,b:189},e)+" !important;"),n.push("    color: "+Te({r:0,g:0,b:0},e)+" !important;"),n.push("}"),e.scrollbarColor&&n.push(function(e){var r,n,o,a,i,u,c=[];if("auto"===e.scrollbarColor)r=Ce({r:241,g:241,b:241},e),n=Te({r:96,g:96,b:96},e),o=Ce({r:176,g:176,b:176},e),a=Ce({r:144,g:144,b:144},e),i=Ce({r:96,g:96,b:96},e),u=Ce({r:255,g:255,b:255},e);else{var s=ue(e.scrollbarColor),l=te(s),d=l.l>.5,f=function(e){return t(t({},l),{l:be(l.l+e,0,1)})},h=function(e){return t(t({},l),{l:be(l.l-e,0,1)})};r=ne(h(.4)),n=ne(d?h(.4):f(.4)),o=ne(l),a=ne(f(.1)),i=ne(f(.2))}return c.push("::-webkit-scrollbar {"),c.push("    background-color: "+r+";"),c.push("    color: "+n+";"),c.push("}"),c.push("::-webkit-scrollbar-thumb {"),c.push("    background-color: "+o+";"),c.push("}"),c.push("::-webkit-scrollbar-thumb:hover {"),c.push("    background-color: "+a+";"),c.push("}"),c.push("::-webkit-scrollbar-thumb:active {"),c.push("    background-color: "+i+";"),c.push("}"),c.push("::-webkit-scrollbar-corner {"),c.push("    background-color: "+u+";"),c.push("}"),c.push("* {"),c.push("    scrollbar-color: "+r+" "+o+";"),c.push("}"),c.join("\n")}(e)),e.selectionColor&&n.push(function(e){var t,r,n=[];if("auto"===e.selectionColor)t=Ce({r:0,g:96,b:212},e),r=Te({r:255,g:255,b:255},e);else{var o=ue(e.selectionColor),a=te(o);t=e.selectionColor,r=a.l<.5?"#FFF":"#000"}return["::selection","::-moz-selection"].forEach(function(e){n.push(e+" {"),n.push("    background-color: "+t+" !important;"),n.push("    color: "+r+" !important;"),n.push("}")}),n.join("\n")}(e)),n.join("\n")}function Xe(e,t){var r=t.strict,n=[];return n.push("html, body, "+(r?"body :not(iframe)":"body > :not(iframe)")+" {"),n.push("    background-color: "+Ce({r:255,g:255,b:255},e)+" !important;"),n.push("    border-color: "+Fe({r:64,g:64,b:64},e)+" !important;"),n.push("    color: "+Te({r:0,g:0,b:0},e)+" !important;"),n.push("}"),n.join("\n")}var Ye=new Set(["inherit","transparent","initial","currentcolor","none","unset"]),Ze=new Map;function et(e){if(e=e.trim(),Ze.has(e))return Ze.get(e);var t=ue(e);return Ze.set(e,t),t}function tt(e){try{return et(e)}catch(e){return null}}var rt=/[\-a-z]+gradient\(([^\(\)]*(\(([^\(\)]*(\(.*?\)))*[^\(\)]*\))){0,15}[^\(\)]*\)/g,nt=new Map,ot=new Map;function at(){Ze.clear(),xe.clear(),nt.clear(),Ke(),ot.clear()}var it={"background-color":{customProp:"--darkreader-inline-bgcolor",cssProp:"background-color",dataAttr:"data-darkreader-inline-bgcolor",store:new WeakSet},"background-image":{customProp:"--darkreader-inline-bgimage",cssProp:"background-image",dataAttr:"data-darkreader-inline-bgimage",store:new WeakSet},"border-color":{customProp:"--darkreader-inline-border",cssProp:"border-color",dataAttr:"data-darkreader-inline-border",store:new WeakSet},"border-bottom-color":{customProp:"--darkreader-inline-border-bottom",cssProp:"border-bottom-color",dataAttr:"data-darkreader-inline-border-bottom",store:new WeakSet},"border-left-color":{customProp:"--darkreader-inline-border-left",cssProp:"border-left-color",dataAttr:"data-darkreader-inline-border-left",store:new WeakSet},"border-right-color":{customProp:"--darkreader-inline-border-right",cssProp:"border-right-color",dataAttr:"data-darkreader-inline-border-right",store:new WeakSet},"border-top-color":{customProp:"--darkreader-inline-border-top",cssProp:"border-top-color",dataAttr:"data-darkreader-inline-border-top",store:new WeakSet},"box-shadow":{customProp:"--darkreader-inline-boxshadow",cssProp:"box-shadow",dataAttr:"data-darkreader-inline-boxshadow",store:new WeakSet},color:{customProp:"--darkreader-inline-color",cssProp:"color",dataAttr:"data-darkreader-inline-color",store:new WeakSet},fill:{customProp:"--darkreader-inline-fill",cssProp:"fill",dataAttr:"data-darkreader-inline-fill",store:new WeakSet},stroke:{customProp:"--darkreader-inline-stroke",cssProp:"stroke",dataAttr:"data-darkreader-inline-stroke",store:new WeakSet},"outline-color":{customProp:"--darkreader-inline-outline",cssProp:"outline-color",dataAttr:"data-darkreader-inline-outline",store:new WeakSet}},ut=Object.values(it),ct=["style","fill","stroke","bgcolor","color"],st=ct.map(function(e){return"["+e+"]"}).join(", ");function lt(){return ut.map(function(e){var t=e.dataAttr,r=e.customProp;return["["+t+"] {","  "+e.cssProp+": var("+r+") !important;","}"].join("\n")}).join("\n")}var dt=new Map,ft=new Map;function ht(e,t,r){dt.has(e)&&(dt.get(e).disconnect(),ft.get(e).disconnect());var n=new WeakSet;function o(e){var o,a;(o=e,a=[],o instanceof Element&&o.matches(st)&&a.push(o),(o instanceof Element||o instanceof ShadowRoot||o instanceof Document)&&E(a,o.querySelectorAll(st)),a).forEach(function(e){n.has(e)||(n.add(e),t(e))}),H(e,function(o){n.has(e)||(n.add(e),r(o.shadowRoot),ht(o.shadowRoot,t,r))})}var a=Z(e,{onMinorMutations:function(e){e.additions.forEach(function(e){return o(e)})},onHugeMutations:function(){o(e)}});dt.set(e,a);var i=new MutationObserver(function(e){e.forEach(function(e){ct.includes(e.attributeName)&&t(e.target),ut.filter(function(t){var r=t.store,n=t.dataAttr;return r.has(e.target)&&!e.target.hasAttribute(n)}).forEach(function(t){var r=t.dataAttr;return e.target.setAttribute(r,"")})})});i.observe(e,{attributes:!0,attributeFilter:ct.concat(ut.map(function(e){return e.dataAttr})),subtree:!0}),ft.set(e,i)}var pt=new WeakMap,mt=["brightness","contrast","grayscale","sepia","mode"];function vt(e,t){return ct.map(function(t){return t+'="'+e.getAttribute(t)+'"'}).concat(mt.map(function(e){return e+'="'+t[e]+'"'})).join(" ")}function gt(e,t,r){if(vt(e,t)!==pt.get(e)){var n=new Set(Object.keys(it));if(r.length>0&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(e.matches(n))return!0}return!1}(e,r))n.forEach(function(t){var r=it[t],n=r.store,o=r.dataAttr;n.delete(e),e.removeAttribute(o)});else{if(e.hasAttribute("bgcolor"))((o=e.getAttribute("bgcolor")).match(/^[0-9a-f]{3}$/i)||o.match(/^[0-9a-f]{6}$/i))&&(o="#"+o),s("background-color","background-color",o);if(e.hasAttribute("color"))((o=e.getAttribute("color")).match(/^[0-9a-f]{3}$/i)||o.match(/^[0-9a-f]{6}$/i))&&(o="#"+o),s("color","color",o);if(e.hasAttribute("fill")&&e instanceof SVGElement){var o=e.getAttribute("fill"),a=!1;if(!(e instanceof SVGTextElement)){var i=e.getBoundingClientRect(),u=i.width,c=i.height;a=u>32||c>32}s("fill",a?"background-color":"color",o)}if(e.hasAttribute("stroke")){o=e.getAttribute("stroke");s("stroke",e instanceof SVGLineElement||e instanceof SVGTextElement?"border-color":"color",o)}e.style&&P(e.style,function(e,t){"background-image"===e&&t.indexOf("url")>=0||it.hasOwnProperty(e)&&s(e,e,t)}),e.style&&e instanceof SVGTextElement&&e.style.fill&&s("fill","color",e.style.getPropertyValue("fill")),S(n,function(t){var r=it[t],n=r.store,o=r.dataAttr;n.delete(e),e.removeAttribute(o)}),pt.set(e,vt(e,t))}}function s(r,o,a){var i=it[r],u=i.customProp,c=i.dataAttr,s=Je(o,a,null,null);if(s){var l=s.value;"function"==typeof l&&(l=l(t)),e.style.setProperty(u,l),e.hasAttribute(c)||e.setAttribute(c,""),n.delete(r)}}}var bt="theme-color",yt='meta[name="'+bt+'"]',wt=null,kt=null;function St(e,t){wt=wt||e.content;try{var r=ue(wt);e.content=Ce(r,t)}catch(e){L(e)}}var Et='style, link[rel*="stylesheet" i]:not([disabled])';function xt(e){return(e instanceof HTMLStyleElement||e instanceof SVGStyleElement||e instanceof HTMLLinkElement&&e.rel&&e.rel.toLowerCase().includes("stylesheet")&&!e.disabled)&&!e.classList.contains("darkreader")&&"print"!==e.media&&!e.classList.contains("stylus")}function Mt(e,t){return void 0===t&&(t=[]),xt(e)?t.push(e):(e instanceof Element||e instanceof ShadowRoot||e===document)&&(S(e.querySelectorAll(Et),function(e){return Mt(e,t)}),H(e,function(e){return Mt(e.shadowRoot,t)})),t}var At=function(){var e=[],t=null;function r(){for(var r;r=e.shift();)r();t=null}return{add:function(n){e.push(n),t||(t=requestAnimationFrame(r))},cancel:function(){e.splice(0),cancelAnimationFrame(t),t=null}}}();function Rt(e,t){for(var o=t.update,i=t.loadingStart,u=t.loadingEnd,c=[],s=e;(s=s.nextElementSibling)&&s.matches(".darkreader");)c.push(s);var l=c.find(function(e){return e.matches(".darkreader--cors")})||null,d=c.find(function(e){return e.matches(".darkreader--sync")})||null,f=null,h=null,p=!1;function m(){return p}var v=new MutationObserver(function(){o()}),g={attributes:!0,childList:!0,characterData:!0};function b(){return e instanceof HTMLStyleElement&&e.textContent.trim().match(O)}function y(){return l?l.sheet.cssRules:b()?null:I()}function w(){l?(e.nextSibling!==l&&e.parentNode.insertBefore(l,e.nextSibling),l.nextSibling!==d&&e.parentNode.insertBefore(d,l.nextSibling)):e.nextSibling!==d&&e.parentNode.insertBefore(d,e.nextSibling)}var k=!1,S=!1;function E(){return r(this,void 0,void 0,function(){var t,r,o,i,u,c,s;return n(this,function(n){switch(n.label){case 0:if(!(e instanceof HTMLLinkElement))return[3,7];if(o=a(N(),2),i=o[0],(u=o[1])&&L(u),!(i&&!u||(h=u,h&&h.message&&h.message.includes("loading"))))return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,(d=e,new Promise(function(e,t){var r=function(){d.removeEventListener("load",n),d.removeEventListener("error",o)},n=function(){r(),e()},o=function(){r(),t("Link loading failed "+d.href)};d.addEventListener("load",n),d.addEventListener("error",o)}))];case 2:return n.sent(),[3,4];case 3:return L(n.sent()),S=!0,[3,4];case 4:if(p)return[2,null];s=a(N(),2),i=s[0],(u=s[1])&&L(u),n.label=5;case 5:return null!=i?[2,i]:[4,Lt(e.href)];case 6:return t=n.sent(),r=q(e.href),p?[2,null]:[3,8];case 7:if(!b())return[2,null];t=e.textContent.trim(),r=q(location.href),n.label=8;case 8:if(!t)return[3,13];n.label=9;case 9:return n.trys.push([9,11,,12]),[4,Ct(t,r)];case 10:return c=n.sent(),l=function(e,t){if(!t)return null;var r=document.createElement("style");return r.classList.add("darkreader"),r.classList.add("darkreader--cors"),r.media="screen",r.textContent=t,e.parentNode.insertBefore(r,e.nextSibling),r.sheet.disabled=!0,r}(e,c),[3,12];case 11:return L(n.sent()),[3,12];case 12:if(l)return f=D(l,"prev-sibling"),[2,l.sheet.cssRules];n.label=13;case 13:return[2,null]}var d,h})})}var x=0,M=new Map,A=new Map,R=null,j=!1;var F=null,W=null;function N(){try{return null==e.sheet?[null,null]:[e.sheet.cssRules,null]}catch(e){return[null,e]}}function I(){var e=a(N(),2),t=e[0],r=e[1];return r?(L(r),null):t}function z(){var e=I();e&&(F=e.length)}function $(){z(),H();var e=function(){var t;(t=I())&&t.length!==F&&(z(),o()),W=requestAnimationFrame(e)};e()}function H(){cancelAnimationFrame(W)}function V(){v.disconnect(),p=!0,f&&f.stop(),h&&h.stop(),H()}var G=10,_=0;return{details:function(){var e=y();return e?{variables:function(e){var t=new Map;return e&&C(e,function(e){e.style&&P(e.style,function(e,r){T(e)&&t.set(e,r)})}),t}(e)}:k||S?null:(k=!0,i(),E().then(function(e){k=!1,u(),e&&o()}).catch(function(e){L(e),k=!1,u()}),null)},render:function(t,r){var n=y();if(n){p=!1;var o=0===A.size,a=new Set(A.keys()),i=function(e){return["mode","brightness","contrast","grayscale","sepia"].map(function(t){return t+":"+e[t]}).join(";")}(t),u=i!==R,c=[];if(C(n,function(t){var n=t.cssText,i=!1;a.delete(n),M.has(n)||(M.set(n,n),i=!0);var u=null,s=null;if(r.size>0||n.includes("var(")){var l=B(n,r);M.get(n)!==l&&(M.set(n,l),i=!0,(u=document.createElement("style")).classList.add("darkreader"),u.classList.add("darkreader--vars"),u.media="screen",u.textContent=l,e.parentNode.insertBefore(u,e.nextSibling),s=u.sheet.cssRules[0])}if(i){o=!0;var d=[],f=s||t;f&&f.style&&P(f.style,function(e,r){var n=Je(e,r,t,m);n&&d.push(n)});var h=null;d.length>0&&(h={selector:t.selectorText,declarations:d},t.parentRule instanceof CSSMediaRule&&(h.media=t.parentRule.media.mediaText),c.push(h)),A.set(n,h),U(u)}else c.push(A.get(n))}),a.forEach(function(e){M.delete(e),A.delete(e)}),R=i,j||o||u){x++,j=!1;var s=[],l=new Map,f=0;c.filter(function(e){return e}).forEach(function(e){var r=e.selector,n=e.declarations,o=e.media;n.forEach(function(e){var n=e.property,a=e.value,i=e.important,u=e.sourceValue;if("function"==typeof a){var c=a(t);if(c instanceof Promise){var d=s.length,h=f++;s.push({media:o,selector:r,property:n,value:null,important:i,asyncKey:h,sourceValue:u});var m=x;c.then(function(e){e&&!p&&m===x&&(s[d].value=e,At.add(function(){var e,t,r,n,o;p||m!==x||(e=h,t=l.get(e),r=t.declarations,n=t.target,o=t.index,n.deleteRule(o),v(n,o,r),l.delete(e))}))})}else s.push({media:o,selector:r,property:n,value:c,important:i,sourceValue:u})}else s.push({media:o,selector:r,property:n,value:a,important:i,sourceValue:u})})}),function t(){var r=[];s.forEach(function(e,t){var n,o,a=0===t?null:s[t-1],i=a&&a.media===e.media,u=a&&i&&a.selector===e.selector;i?n=r[r.length-1]:(n=[],r.push(n)),u?o=n[n.length-1]:(o=[],n.push(o)),o.push(e)}),d||((d=e instanceof SVGStyleElement?document.createElementNS("http://www.w3.org/2000/svg","style"):document.createElement("style")).classList.add("darkreader"),d.classList.add("darkreader--sync"),d.media="screen"),h&&h.stop(),w(),null==d.sheet&&(d.textContent="");for(var n=d.sheet,o=n.cssRules.length-1;o>=0;o--)n.deleteRule(o);r.forEach(function(e){var t,r=e[0][0].media;r?(n.insertRule("@media "+r+" {}",n.cssRules.length),t=n.cssRules[n.cssRules.length-1]):t=n,e.forEach(function(e){var r=e.filter(function(e){return null==e.value});r.length>0&&r.forEach(function(r){var n=r.asyncKey;return l.set(n,{declarations:e,target:t,index:t.cssRules.length})}),v(t,t.cssRules.length,e)})}),h?h.run():h=D(d,"prev-sibling",t)}()}}function v(e,t,r){var n=r[0].selector;e.insertRule(n+" {}",t);var o=e.cssRules.item(t).style;r.forEach(function(e){var t=e.property,r=e.value,n=e.important,a=e.sourceValue;o.setProperty(t,null==r?a:r,n?"important":"")})}},pause:V,destroy:function(){V(),U(l),U(d)},watch:function(){v.observe(e,g),e instanceof HTMLStyleElement&&$()},restore:function(){if(d)if(++_>G)L("Style sheet was moved multiple times",e);else{L("Restore style",d,e);var t=null==d.sheet||d.sheet.cssRules.length>0;w(),t&&(j=!0,z(),o())}}}}function Lt(e){return r(this,void 0,void 0,function(){return n(this,function(t){switch(t.label){case 0:return e.startsWith("data:")?[4,fetch(e)]:[3,3];case 1:return[4,t.sent().text()];case 2:return[2,t.sent()];case 3:return[4,ze({url:e,responseType:"text",mimeType:"text/css"})];case 4:return[2,t.sent()]}})})}function Ct(e,t){return r(this,void 0,void 0,function(){var r,a,i,u,c,s,l,d,f,h;return n(this,function(n){switch(n.label){case 0:e=function(e,t){return e.replace(F,function(e){var r=W(e);return'url("'+A(t,r)+'")'})}(e=function(e){return e.replace(I,"")}(e=e.replace(N,"")),t),r=we(O,e),n.label=1;case 1:n.trys.push([1,10,11,12]),a=o(r),i=a.next(),n.label=2;case 2:if(i.done)return[3,9];u=i.value,c=W(u.substring(8).replace(/;$/,"")),s=A(t,c),l=void 0,n.label=3;case 3:return n.trys.push([3,6,,7]),[4,Lt(s)];case 4:return[4,Ct(l=n.sent(),q(s))];case 5:return l=n.sent(),[3,7];case 6:return L(n.sent()),l="",[3,7];case 7:e=e.split(u).join(l),n.label=8;case 8:return i=a.next(),[3,2];case 9:return[3,12];case 10:return d=n.sent(),f={error:d},[3,12];case 11:try{i&&!i.done&&(h=a.return)&&h.call(a)}finally{if(f)throw f.error}return[7];case 12:return[2,e=e.trim()]}})})}var Pt,Tt,jt=[],Ft=new Map;function Ot(e){(function(){try{return document.querySelector(":defined"),!0}catch(e){return!1}})()&&S(e.querySelectorAll(":not(:defined)"),function(e){var t=e.tagName.toLowerCase();Ft.has(t)||(Ft.set(t,new Set),function(e){return new Promise(function(t){if(window.customElements&&"function"==typeof window.customElements.whenDefined)customElements.whenDefined(e).then(t);else{var r=function(){var n=Ft.get(e);n&&n.size>0&&(n.values().next().value.matches(":defined")?t():requestAnimationFrame(r))};requestAnimationFrame(r)}})}(t).then(function(){if(Tt){var e=Ft.get(t);Ft.delete(t),Tt(Array.from(e))}})),Ft.get(t).add(e)})}function Wt(e,t){qt();var r=new Set(e),n=new WeakMap,o=new WeakMap;function a(e){n.set(e,e.previousElementSibling),o.set(e,e.nextElementSibling)}function i(e){var i=e.createdStyles,u=e.removedStyles,c=e.movedStyles;i.forEach(function(e){return a(e)}),c.forEach(function(e){return a(e)}),u.forEach(function(e){return t=e,n.delete(t),void o.delete(t);var t}),i.forEach(function(e){return r.add(e)}),u.forEach(function(e){return r.delete(e)}),i.size+u.size+c.size>0&&t({created:Array.from(i),removed:Array.from(u),moved:Array.from(c),updated:[]})}function u(e){var t=e.additions,r=e.moves,n=e.deletions,o=new Set,a=new Set,u=new Set;t.forEach(function(e){return Mt(e).forEach(function(e){return o.add(e)})}),n.forEach(function(e){return Mt(e).forEach(function(e){return a.add(e)})}),r.forEach(function(e){return Mt(e).forEach(function(e){return u.add(e)})}),i({createdStyles:o,removedStyles:a,movedStyles:u}),t.forEach(function(e){H(e,d),Ot(e)})}function c(e){var t=new Set(Mt(e)),a=new Set,u=new Set,c=new Set;t.forEach(function(e){r.has(e)||a.add(e)}),r.forEach(function(e){t.has(e)||u.add(e)}),t.forEach(function(e){var t;a.has(e)||u.has(e)||(t=e).previousElementSibling===n.get(t)&&t.nextElementSibling===o.get(t)||c.add(e)}),i({createdStyles:a,removedStyles:u,movedStyles:c}),H(e,d),Ot(e)}function s(e){var r=new Set;e.forEach(function(e){xt(e.target)&&e.target.isConnected&&r.add(e.target)}),r.size>0&&t({updated:Array.from(r),created:[],removed:[],moved:[]})}function l(e){var t=Z(e,{onMinorMutations:u,onHugeMutations:c}),r=new MutationObserver(s);r.observe(e,{attributes:!0,attributeFilter:["rel","disabled"],subtree:!0}),jt.push(t,r),Pt.add(e)}function d(e){null==e.shadowRoot||Pt.has(e.shadowRoot)||l(e.shadowRoot)}e.forEach(a),l(document),H(document.documentElement,d),Tt=function(e){var r=[];e.forEach(function(e){return E(r,Mt(e.shadowRoot))}),t({created:r,updated:[],removed:[],moved:[]}),e.forEach(function(e){return d(e)})},Ot(document)}function qt(){jt.forEach(function(e){return e.disconnect()}),jt.splice(0,jt.length),Pt=new WeakSet,Tt=null,Ft.clear()}var Nt=new Map,It=new Map,zt=null,Bt=null,$t=null;function Ut(e,t){void 0===t&&(t=document.head||document);var r=t.querySelector("."+e);return r||((r=document.createElement("style")).classList.add("darkreader"),r.classList.add(e),r.media="screen"),r}var Dt=new Map;function Ht(e,t){Dt.has(t)&&Dt.get(t).stop(),Dt.set(t,D(e,"parent"))}function Vt(){var e=Ut("darkreader--fallback");e.textContent=Xe(zt,{strict:!0}),document.head.insertBefore(e,document.head.firstChild),Ht(e,"fallback");var r=Ut("darkreader--user-agent");r.textContent=Qe(zt,$t),document.head.insertBefore(r,e.nextSibling),Ht(r,"user-agent");var n,o,a=Ut("darkreader--text");zt.useFont||zt.textStroke>0?a.textContent=(n=zt,(o=[]).push("*:not(pre) {"),n.useFont&&n.fontFamily&&o.push("  font-family: "+n.fontFamily+" !important;"),n.textStroke>0&&(o.push("  -webkit-text-stroke: "+n.textStroke+"px !important;"),o.push("  text-stroke: "+n.textStroke+"px !important;")),o.push("}"),o.join("\n")):a.textContent="",document.head.insertBefore(a,e.nextSibling),Ht(a,"text");var i=Ut("darkreader--invert");Bt&&Array.isArray(Bt.invert)&&Bt.invert.length>0?i.textContent=[Bt.invert.join(", ")+" {","    filter: "+We(t(t({},zt),{contrast:0===zt.mode?zt.contrast:be(zt.contrast-10,0,100)}))+" !important;","}"].join("\n"):i.textContent="",document.head.insertBefore(i,a.nextSibling),Ht(i,"invert");var u=Ut("darkreader--inline");u.textContent=lt(),document.head.insertBefore(u,i.nextSibling),Ht(u,"inline");var c=Ut("darkreader--override");c.textContent=Bt&&Bt.css?Bt.css.replace(/\${(.+?)}/g,function(e,t){try{var r=et(t);return Me(r,zt,Ae)}catch(e){return L(e),t}}):"",document.head.appendChild(c),Ht(c,"override")}var Gt=new Set;function _t(e){var t=Ut("darkreader--inline",e);t.textContent=lt(),e.insertBefore(t,e.firstChild),Gt.add(e)}function Kt(){var e=document.head.querySelector(".darkreader--fallback");e&&(e.textContent="")}var Jt=0,Qt=new Set;function Xt(e){if(!Nt.has(e)){var t=++Jt,r=Rt(e,{update:function(){var e=r.details();e&&(0===e.variables.size?r.render(zt,It):(Yt(e.variables),er()))},loadingStart:function(){if(!V()||!or){Qt.add(t);var e=document.querySelector(".darkreader--fallback");e.textContent||(e.textContent=Xe(zt,{strict:!1}))}},loadingEnd:function(){Qt.delete(t),0===Qt.size&&V()&&Kt()}});return Nt.set(e,r),r}}function Yt(e){0!==e.size&&(e.forEach(function(e,t){return It.set(t,e)}),It.forEach(function(e,t){return It.set(t,B(e,It))}))}function Zt(e){var t=Nt.get(e);t&&(t.destroy(),Nt.delete(e))}var er=$(function(e){Nt.forEach(function(e){return e.render(zt,It)}),e&&e()}),tr=function(){er.cancel()};function rr(){0===Qt.size&&Kt()}var nr=null,or=!document.hidden;function ar(){document.removeEventListener("visibilitychange",nr),nr=null}function ir(){function e(){!function(){tr(),Yt(j(document.documentElement));var e=Mt(document).filter(function(e){return!Nt.has(e)}).map(function(e){return Xt(e)}),t=e.map(function(e){return e.details()}).filter(function(e){return e&&e.variables.size>0}).map(function(e){return e.variables});0===t.length?(Nt.forEach(function(e){return e.render(zt,It)}),0===Qt.size&&Kt()):(t.forEach(function(e){return Yt(e)}),er(function(){0===Qt.size&&Kt()})),e.forEach(function(e){return e.watch()});var r=function(e){for(var t=[],r=0,n=e.length;r<n;r++)t.push(e[r]);return t}(document.querySelectorAll(st));H(document.documentElement,function(e){var t=e.shadowRoot.querySelectorAll(st);t.length>0&&(_t(e.shadowRoot),E(r,t))});var n=Bt&&Array.isArray(Bt.ignoreInlineStyle)?Bt.ignoreInlineStyle:[];r.forEach(function(e){return gt(e,zt,n)})}(),function(){Wt(Array.from(Nt.keys()),function(e){var t=e.created,r=e.updated,n=e.removed,o=e.moved,a=n,i=t.concat(r).concat(o).filter(function(e){return!Nt.has(e)}),u=o.filter(function(e){return Nt.has(e)});a.forEach(function(e){return Zt(e)});var c=i.map(function(e){return Xt(e)}),s=c.map(function(e){return e.details()}).filter(function(e){return e&&e.variables.size>0}).map(function(e){var t=e.variables;return t});0===s.length?c.forEach(function(e){return e.render(zt,It)}):(s.forEach(function(e){return Yt(e)}),er()),c.forEach(function(e){return e.watch()}),u.forEach(function(e){return Nt.get(e).restore()})});var e=Bt&&Array.isArray(Bt.ignoreInlineStyle)?Bt.ignoreInlineStyle:[];t=function(t){if(gt(t,zt,e),t===document.documentElement){var r=j(document.documentElement);r.size>0&&(Yt(r),er())}},r=function(t){var r=t.querySelectorAll(st);r.length>0&&(_t(t),S(r,function(t){return gt(t,zt,e)}))},ht(document,t,r),H(document.documentElement,function(e){ht(e.shadowRoot,t,r)}),_(rr);var t,r}()}var t,r,n,o;Vt(),document.hidden?(t=e,r=Boolean(nr),nr=function(){document.hidden||(ar(),t(),or=!0)},r||document.addEventListener("visibilitychange",nr)):e(),n=zt,(o=document.querySelector(yt))?St(o,n):(kt&&kt.disconnect(),(kt=new MutationObserver(function(e){e:for(var t=0;t<e.length;t++)for(var r=e[t].addedNodes,o=0;o<r.length;o++){var a=r[o];if(a instanceof HTMLMetaElement&&a.name===bt){kt.disconnect(),kt=null,St(a,n);break e}}})).observe(document.head,{childList:!0}))}function ur(){Nt.forEach(function(e){return e.pause()}),S(Dt.values(),function(e){return e.stop()}),Dt.clear(),qt(),dt.forEach(function(e){return e.disconnect()}),ft.forEach(function(e){return e.disconnect()}),dt.clear(),ft.clear(),K(rr)}function cr(e,t,r){if(zt=e,Bt=t,$t=r,document.head)ir();else{if(!u()){var n=Ut("darkreader--fallback");document.documentElement.appendChild(n),n.textContent=Xe(zt,{strict:!0})}var o=new MutationObserver(function(){document.head&&(o.disconnect(),ir())});o.observe(document,{childList:!0,subtree:!0})}}function sr(){ar(),tr(),ur(),at(),U(document.querySelector(".darkreader--fallback")),document.head&&(!function(){kt&&(kt.disconnect(),kt=null);var e=document.querySelector(yt);e&&wt&&(e.content=wt)}(),U(document.head.querySelector(".darkreader--user-agent")),U(document.head.querySelector(".darkreader--text")),U(document.head.querySelector(".darkreader--invert")),U(document.head.querySelector(".darkreader--inline")),U(document.head.querySelector(".darkreader--override"))),Gt.forEach(function(e){U(e.querySelector(".darkreader--inline"))}),Gt.clear(),S(Nt.keys(),function(e){return Zt(e)}),S(document.querySelectorAll(".darkreader"),U)}var lr=function(){try{return window.self!==window.top}catch(e){return console.warn(e),!0}}();function dr(e,r){void 0===e&&(e={}),void 0===r&&(r=null);var n=t(t({},k),e);if(n.engine!==w.dynamicTheme)throw new Error("Theme engine is not supported");cr(n,r,lr)}function fr(){sr()}var hr=matchMedia("(prefers-color-scheme: dark)"),pr={themeOptions:null,fixes:null};function mr(){hr.matches?dr(pr.themeOptions,pr.fixes):fr()}var vr=function(e){h=e||f};e.auto=function(e,t){void 0===e&&(e={}),void 0===t&&(t=null),e?(pr={themeOptions:e,fixes:t},mr(),hr.addListener(mr)):(hr.removeListener(mr),fr())},e.disable=fr,e.enable=dr,e.setFetchMethod=vr,Object.defineProperty(e,"__esModule",{value:!0})});