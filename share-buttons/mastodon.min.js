"use strict";const COOKIE_NAME="instance-address",URL_REGEX=/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([\/\w .-]*)*\/?$/;function msbShareButtonAction(e,t){let o="";if((o=msbGetCookie("instance-address")).length>0)window.open(`${o}/share?text=${e}%20${t}`,"__blank");else if(msbConfig&&msbConfig.openModal&&msbConfig.addressFieldSelector){if(document.querySelector(msbConfig.buttonModalSelector)){let o=document.querySelector(msbConfig.buttonModalSelector);o.data={target:t,name:e},o.addEventListener("click",()=>msbOnShare(),!1)}msbConfig.openModal(e,t)}}function msbOnShare(e,t){if(msbConfig&&msbConfig.addressFieldSelector&&msbConfig.buttonModalSelector){let o=e||document.querySelector(msbConfig.buttonModalSelector).data.name,n=t||document.querySelector(msbConfig.buttonModalSelector).data.target,i=document.querySelector(`${msbConfig.addressFieldSelector}`).value;if(i.match(URL_REGEX)){if(msbConfig.memorizeFieldId){let e=document.querySelector(`#${msbConfig.memorizeFieldId}`).checked;msbConfig.memorizeFieldId&&!msbGetCookie(COOKIE_NAME).length>0&&e&&msbSetCookie(COOKIE_NAME,i,7)}window.open(`${i}/share?text=${o}%20${n}`,"__blank"),msbConfig&&msbConfig.openModal&&msbConfig.closeModal&&msbConfig.closeModal()}}}function msbGetCookie(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var i=o[n];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(t))return i.substring(t.length,i.length)}return""}function msbSetCookie(e,t,o){let n=new Date;n.setTime(n.getTime()+864e5*o);let i="expires="+n.toUTCString();document.cookie=`${e}=${t}; ${i}; path=/`}function msbI18n(){let e=navigator.language||navigator.userLanguage,t={ar:"بوّق",bg:"Раздумай",cs:"Tootnout",de:"Tröt",eo:"Hué",es:"Tootear",eu:"Tut",fa:"بوق",fi:"Tuuttaa",fr:"Pouet",gl:"ללחוש",he:"ללחוש",hu:"Tülk",hy:"Թթել",io:"Siflar",ja:"トゥート",ko:"툿",no:"Tut",oc:"Tut",pl:"Wyślij","pt-BR":"Publicar",pt:"Publicar",ru:"Трубить","sr-Latn":"Tutni",sr:"Тутни",uk:"Дмухнути","zh-CN":"嘟嘟","zh-HK":"發文","zh-TW":"貼掉",default:"Toot"},o=null;try{o=t[e]}catch(e){o=t.default}return o}!function(){let e=document.querySelectorAll(".mastodon-share-button");for(let t=0;t<e.length;t++)!function(t){let o=e[t].dataset.target,n=e[t].dataset.name,i=e[t].dataset.buttonstyle,a=e[t].dataset.text;n=n.replace(/#/g,"%23");let l=document.createElement("button"),s=null;s=msbConfig&&(msbConfig.buttonDisplayText||void 0===msbConfig.buttonDisplayText)?a?document.createTextNode(a):document.createTextNode(msbI18n()):document.createTextNode(""),i&&l.setAttribute("class",i),l.appendChild(s),e[t].appendChild(l),msbConfig&&msbConfig.buttonIconHtml&&(l.innerHTML=`${msbConfig.buttonIconHtml} ${l.innerHTML}`),l.addEventListener("click",()=>{msbShareButtonAction(n,o)},!0)}(t)}();