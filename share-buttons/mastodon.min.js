"use strict";const COOKIE_NAME="instance-address",URL_REGEX=/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([\/\w .-]*)*\/?$/;function msbShareButtonAction(e,t){let o="";if((o=msbGetCookie("instance-address")).length>0)window.open(`${o}/share?text=${e}%20${t}`,"__blank");else if(msbConfig&&msbConfig.openModal&&msbConfig.addressFieldSelector){if(document.querySelector(msbConfig.buttonModalSelector)){let n=document.querySelector(msbConfig.buttonModalSelector);n.data={target:t,name:e},n.addEventListener("click",()=>msbOnShare(),!1)}msbConfig.openModal(e,t)}}function msbOnShare(e,t){if(msbConfig&&msbConfig.addressFieldSelector&&msbConfig.buttonModalSelector){let o=e||document.querySelector(msbConfig.buttonModalSelector).data.name,n=t||document.querySelector(msbConfig.buttonModalSelector).data.target,l=document.querySelector(`${msbConfig.addressFieldSelector}`).value;if(l.match(URL_REGEX)){if(msbConfig.memorizeFieldId){let a=document.querySelector(`#${msbConfig.memorizeFieldId}`).checked;msbConfig.memorizeFieldId&&!msbGetCookie(COOKIE_NAME).length>0&&a&&msbSetCookie(COOKIE_NAME,l,7)}window.open(`${l}/share?text=${o}%20${n}`,"__blank"),msbConfig&&msbConfig.openModal&&msbConfig.closeModal&&msbConfig.closeModal()}}}function msbGetCookie(e){for(var t=e+"=",o=document.cookie.split(";"),n=0;n<o.length;n++){for(var l=o[n];" "==l.charAt(0);)l=l.substring(1);if(0==l.indexOf(t))return l.substring(t.length,l.length)}return""}function msbSetCookie(e,t,o){let n=new Date;n.setTime(n.getTime()+864e5*o);let l="expires="+n.toUTCString();document.cookie=`${e}=${t}; ${l}; path=/`}function msbI18n(){let e=navigator.language||navigator.userLanguage,t={ar:"بوّق",bg:"Раздумай",cs:"Tootnout",de:"Tr\xf6t",eo:"Hu\xe9",es:"Tootear",eu:"Tut",fa:"بوق",fi:"Tuuttaa",fr:"Pouet",gl:"ללחוש",he:"ללחוש",hu:"T\xfclk",hy:"Թթել",io:"Siflar",ja:"トゥート",ko:"툿",no:"Tut",oc:"Tut",pl:"Wyślij","pt-BR":"Publicar",pt:"Publicar",ru:"Трубить","sr-Latn":"Tutni",sr:"Тутни",uk:"Дмухнути","zh-CN":"嘟嘟","zh-HK":"發文","zh-TW":"貼掉",default:"Toot"},o=null;try{o=t[e]}catch(n){o=t.default}return o}!function(){let e=document.querySelectorAll(".mastodon-share-button");for(let t=0;t<e.length;t++)!function(t){let o=e[t].dataset.target,n=e[t].dataset.name,l=e[t].dataset.buttonstyle,a=e[t].dataset.text;n=n.replace(/#/g,"%23");let r=document.createElement("button"),i=null;i=msbConfig&&(msbConfig.buttonDisplayText||void 0===msbConfig.buttonDisplayText)?a?document.createTextNode(a):document.createTextNode(msbI18n()):document.createTextNode(""),l&&r.setAttribute("class",l),r.appendChild(i),e[t].appendChild(r),msbConfig&&msbConfig.buttonIconHtml&&(r.innerHTML=`${msbConfig.buttonIconHtml} ${r.innerHTML}`),r.addEventListener("click",()=>{msbShareButtonAction(n,o)},!0)}(t)}();