"use strict";const COOKIE_NAME="instance-address",URL_REGEX=/^(https?:\/\/)?([\da-z.-]+)\.([a-z.]{2,6})([\/\w .-]*)*\/?$/;function msbShareButtonAction(a,b){let c="";if((c=msbGetCookie("instance-address")).length>0)window.open(`${c}/share?text=${a}%20${b}`,"__blank");else if(msbConfig&&msbConfig.openModal&&msbConfig.addressFieldSelector){if(document.querySelector(msbConfig.buttonModalSelector)){let d=document.querySelector(msbConfig.buttonModalSelector);d.data={target:b,name:a},d.addEventListener("click",()=>msbOnShare(),!1)}msbConfig.openModal(a,b)}}function msbOnShare(b,c){if(msbConfig&&msbConfig.addressFieldSelector&&msbConfig.buttonModalSelector){let d=b||document.querySelector(msbConfig.buttonModalSelector).data.name,e=c||document.querySelector(msbConfig.buttonModalSelector).data.target,a=document.querySelector(`${msbConfig.addressFieldSelector}`).value;if(a.match(URL_REGEX)){if(msbConfig.memorizeFieldId){let f=document.querySelector(`#${msbConfig.memorizeFieldId}`).checked;msbConfig.memorizeFieldId&& !msbGetCookie(COOKIE_NAME).length>0&&f&&msbSetCookie(COOKIE_NAME,a,7)}window.open(`${a}/share?text=${d}%20${e}`,"__blank"),msbConfig&&msbConfig.openModal&&msbConfig.closeModal&&msbConfig.closeModal()}}}function msbGetCookie(e){for(var c=e+"=",d=document.cookie.split(";"),b=0;b<d.length;b++){for(var a=d[b];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(c))return a.substring(c.length,a.length)}return""}function msbSetCookie(b,c,d){let a=new Date;a.setTime(a.getTime()+864e5*d);let e="expires="+a.toUTCString();document.cookie=`${b}=${c}; ${e}; path=/`}function msbI18n(){let c=navigator.language||navigator.userLanguage,b={ar:"\u0628\u0648\u0651\u0642",bg:"\u0420\u0430\u0437\u0434\u0443\u043C\u0430\u0439",cs:"Tootnout",de:"Tr\xf6t",eo:"Hu\xe9",es:"Tootear",eu:"Tut",fa:"\u0628\u0648\u0642",fi:"Tuuttaa",fr:"Pouet",gl:"\u05DC\u05DC\u05D7\u05D5\u05E9",he:"\u05DC\u05DC\u05D7\u05D5\u05E9",hu:"T\xfclk",hy:"\u0539\u0569\u0565\u056C",io:"Siflar",ja:"\u30C8\u30A5\u30FC\u30C8",ko:"\uD23F",no:"Tut",oc:"Tut",pl:"Wy\u015Blij","pt-BR":"Publicar",pt:"Publicar",ru:"\u0422\u0440\u0443\u0431\u0438\u0442\u044C","sr-Latn":"Tutni",sr:"\u0422\u0443\u0442\u043D\u0438",uk:"\u0414\u043C\u0443\u0445\u043D\u0443\u0442\u0438","zh-CN":"\u561F\u561F","zh-HK":"\u767C\u6587","zh-TW":"\u8CBC\u6389",default:"Toot"},a=null;try{a=b[c]}catch(d){a=b.default}return a}!function(){let b=document.querySelectorAll(".mastodon-share-button");for(let a=0;a<b.length;a++)!function(c){let h=b[c].dataset.target,d=b[c].dataset.name,e=b[c].dataset.buttonstyle,f=b[c].dataset.text;d=d.replace(/#/g,"%23");let a=document.createElement("button"),g=null;g=msbConfig&&(msbConfig.buttonDisplayText|| void 0===msbConfig.buttonDisplayText)?f?document.createTextNode(f):document.createTextNode(msbI18n()):document.createTextNode(""),e&&a.setAttribute("class",e),a.appendChild(g),b[c].appendChild(a),msbConfig&&msbConfig.buttonIconHtml&&(a.innerHTML=`${msbConfig.buttonIconHtml} ${a.innerHTML}`),a.addEventListener("click",()=>{msbShareButtonAction(d,h)},!0)}(a)}()